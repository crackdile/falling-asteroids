<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke MahÃ© (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Presentation</title>

    <meta charset='utf-8'>
    <script src='slides.js'></script>
  </head>

  <body style='display: none'>

    <section class='slides layout-widescreen template-io2011'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
        
        
      
      <article class='biglogo'>
      </article>

      <article>
        <h1>
          Falling Asteroids
        </h1>
        <h2>A 2D videogame with HTML5 Canvas</h2>
        <p>
          Isaac Zepeda
          <br>
          Nov 8, 2014
        </p>
      </article>

      <article>
        <h3>Hi, I'm Isaac Zepeda</h3>
        <p>Software Engineer at Nearsoft</p>
        <p>Ruby, JavaScript</p>
        <p>Twitter: <a href="http://twitter.com/el_keogh">@el_keogh</a></p>
        <p>Blog: <a href="http://hardcoders.mx">hardcoders.mx</a></p>
        <p><img class="centered" src="img/isaac.jpg" style="width: 400px"></p>
      </article>
      
      <article>
        <h3>Agenda</h3>
      </article>

      <article>
        <h3>Why?</h3>
        <p>#YOLO</p>
        <p>Bigger Resume</p>
        <p>My dream's life</p>
        <p>I want to become a Game Developer</p>
        <p>Fun!</p>
      </article>

      <article>
        <h2>Let's create a Game</h2>
      </article>

      <article class='fill'>
        <h3>Falling Asteroids</h3>
        <iframe src="/complete"></iframe>
      </article>

      <article>
        <h3>The Parts</h3>
      </article>

      <article>
        <h3>The Canvas</h3>
        <section>
          <pre class="prettyprint">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title>Falling Asteroids&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;canvas id="surface" width="870" height="680">&lt;/canvas&gt;
  &lt;/body&gt;
&lt;/html&gt;
          </pre>
        </section>
      </article>

      <article class='fill'>
        <h3>Empty Canvas</h3>
        <iframe src="/ph001"></iframe> 
      </article>

      <article>
        <h3>Rendering Images</h3>
        <ul>
          <li>Asset Manager</li>
          <li>Canvas drawImage(img, x, y)</li>
        </ul>
      </article>
      
      <article>
        <h3>The Asset Manager</h3>
        <section>
          <pre>
function AssetManager() {
  this.successCount = 0;
  this.errorCount = 0;
  this.cache = {};
  this.downloadQueue = [];
}

AssetManager.prototype.queueDownload = function (path) {
  this.downloadQueue.push(path);
}

AssetManager.prototype.isDone = function () {
  return (this.downloadQueue.length == this.successCount + this.errorCount);
}
          </pre>
        <section>
      </article>
      
      <article>
        <h3>Asset Manager (cont.)</h3>
        <section>
          <pre>
AssetManager.prototype.downloadAll = function (callback) {
  for (var i = 0; i < this.downloadQueue.length; i++) {
    var path = this.downloadQueue[i];
    var img = new Image();
    var that = this;
    img.addEventListener("load", function () {
      that.successCount += 1;
      if (that.isDone()) { callback(); }
    });
    img.addEventListener("error", function () {
      that.errorCount += 1;
      if (that.isDone()) { callback(); }
    });
    img.src = path;
    this.cache[path] = img;
  }
}
          </pre>
        <section>
      </article>
      
      <article>
        <h3>Rendering Images</h3>
        <section>
          <pre>
ASSET_MANAGER.queueDownload('img/player.png');

ASSET_MANAGER.downloadAll(function () {
  var x = 435, y = 642;
  var sprite = ASSET_MANAGER.getAsset('img/player.png');
  
  // draw image centered
  ctx.drawImage(sprite, x - sprite.width/2, y - sprite.height/2);
});
          </pre>
        </section>
      </article>

      <article class="fill">
        <iframe src="/ph002"></iframe>
      </article>

      <article>
        <h3>Game Loop</h3>
        <img src="img/gameloop.png" class="centered">
      </article>

      <article>
        <h3>Giving Life!</h3>
        <ul>
          <li>Game Engine and Entities</li>
          <li>Loop update() and draw()</li>
          <li>Use requestAnimationFrame(callback, element)</li>
        </ul>
      </article>

      <article>
        <h3>Game Engine</h3>
        <section>
          <pre>
function GameEngine() {
  this.entities = [];
  this.ctx = null;
  this.lastUpdateTimestamp = null;
  this.deltaTime = null;
}

GameEngine.prototype.draw = function(callback) {
  // loop through all entities, call draw()
}

GameEngine.prototype.update = function() {
  // loop through all entities, call update()
}
          </pre>
        </section>
      </article>
      
      <article>
        <h3>Game Loop</h3>
        <section>
          <pre>
GameEngine.prototype.loop = function() {
  var now = Date.now();
  this.deltaTime = now - this.lastUpdateTimestamp;
  this.update();
  this.draw();
  this.lastUpdateTimestamp = now;
}
          </pre>
        </section>
      </article>
      
      <article>
        <h3>Game engine start</h3>
        <section>
          <pre>
GameEngine.prototype.start = function() {
  this.lastUpdateTimestamp = Date.now();
  var that = this;
  (function gameLoop() {
      that.loop();
      requestAnimFrame(gameLoop, that.ctx.canvas);
  })();
}
          </pre>
        </section>
      </article>
      
      <article>
        <h3>requestAnimationFrame()</h3>
        <section>
          <pre>
window.requestAnimFrame = (function(){
    return  window.requestAnimationFrame       ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            window.oRequestAnimationFrame      ||
            window.msRequestAnimationFrame     ||
            function(/* function */ callback, /* DOMElement */ element){
              window.setTimeout(callback, 1000 / 60);
            };
})();
          </pre>
          <p>Learn more: <a href="http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/" target="_blank">requestAnimationFrame</a></p>
        </section>
      </article>
      
      <article>
        <h3>Entities</h3>
        
      </article>

      <article class='nobackground'>
        <iframe src='http://www.google.com/doodle4google/history.html'></iframe>
      </article>

      <article class='fill'>
        <h3>
          Full-slide embed with (optional) slide title on top
        </h3>
        <iframe src='http://www.google.com/doodle4google/history.html'></iframe>
      </article>
      
      <article>
        <h3>
          Thank you!
        </h3>
        
        <ul>
          <li>
            <a href='http://www.google.com'>google.com</a>
        </ul>
      </article>

    </section>
  </body>
</html>